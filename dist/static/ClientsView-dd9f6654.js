import"./index-cb173056.js";/* empty css                 *//* empty css                  *//* empty css                   */import{T as H}from"./TablesView-f4b48d0e.js";import{H as K,aB as Z,ay as J,r as C,w as Q,d as W,Z as X,_ as Y,$ as ee,A as te,l as z,m as N,p as l,V as s,P as a,u as v,T as i,F as oe,a8 as ae,K as T,U as p}from"./vue-95bbca75.js";import{C as w}from"./index-406f808a.js";import{a as m,b as S,o as le,p as se,q as ne,r as re}from"./element-2ee26c53.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                    */const ie={class:"color-picker"},pe={class:"dialog-footer"},Se=K({__name:"ClientsView",setup(ue){const h=Z(),x=J();C();const u=C(!1),f=C(!1),d=C(""),V=["#f31616","#09e609","#0b0be6","#e8e807","#e10fe1","#12dada"];let c="";const E=()=>{d.value=""},P=()=>{d.value="",f.value=!1},B=async()=>{d.value&&(await w.select_color({uid:c,color:d.value})).data.status===200&&m.success("修改颜色成功"),f.value=!1,u.value=!1},_=C([]),n={page:Number(h.query.page)||1,pageSize:Number(h.query.pageSize)||10},k=(o=1,t=10)=>w.get_clients_list({page:o,page_size:t});Q(()=>h.query,async o=>{const{page:t,pageSize:r}=o;n.page=Number(t)||n.page,n.pageSize=Number(r)||n.pageSize,k(n.page,n.pageSize).then(g=>{_.value=g.data.data.list,y.options.paginationConfig={total:g.data.data.total,currentPage:n.page,pageSize:n.pageSize,pageSizes:[10,50,100,1e3],layout:"total,prev, pager, next,sizes"}})},{immediate:!0});function A(){k(n.page,n.pageSize).then(o=>{_.value=o.data.data.list,y.options.paginationConfig={total:o.data.data.total,currentPage:n.page,pageSize:n.pageSize,pageSizes:[10,50,100,1e3],layout:"total,prev, pager, next,sizes"}})}W(async()=>{const o=setInterval(A,2e3);X(()=>{clearInterval(o)})});const U=[{prop:"FirstStart",label:"FirstStart",showOverflowTooltip:!0,Color:"Color",width:"100"},{prop:"ExternalIP",label:"外网IP",showOverflowTooltip:!0,Color:"Color",width:"130"},{prop:"Username",label:"User",showOverflowTooltip:!0,Color:"Color"},{prop:"Computer",label:"Computer",showOverflowTooltip:!0,width:"170",Color:"Color"},{prop:"Address",label:"Address",showOverflowTooltip:!0,Color:"Color",width:"200"},{prop:"Arch",label:"Arch",showOverflowTooltip:!0,width:"60",Color:"Color"},{prop:"Note",label:"Note",showOverflowTooltip:!0,Color:"Color",width:"120"},{prop:"Sleep",label:"Sleep",showOverflowTooltip:!0,width:"65",Color:"Color"},{width:"200",label:"操作",buttons:[],slot:"action",Color:"Color"}],O=o=>{u.value=!0,c=o.Uid},I=async o=>{const{value:t}=await S.prompt("输入Note","Note",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"Note"});if(!t){m.warning("Note不能为空");return}(await w.add_uid_note({uid:o,note:t})).data.status===200&&m.success("Note成功"),u.value=!1},$=async o=>{const{value:t}=await S.prompt("Sleep",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"Sleep"});if(!t){m.warning("Sleep不能为空");return}(await w.edit_sleep({uid:o,sleep:t})).data.status===200&&m.success("修改Sleep成功"),u.value=!1},q=async o=>{f.value=!0},F=o=>{S.confirm("是否退出客户端?","退出确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{(await w.do_exit({uid:o})).data.status===200&&m.success("退出成功"),u.value=!1})},R=o=>{x.push({path:"/client/shell",query:{uid:o.Uid}})},y=Y({options:{showPagination:!0}}),{options:M}=ee(y),D=te("reload"),L=async(o,t)=>{await x.push({path:h.path,query:{page:o,pageSize:t}}),D()};return(o,t)=>{const r=le,g=se,j=re,G=ne;return z(),N("div",null,[l("div",null,[s(g,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value=e),width:"30%"},{default:a(()=>[s(r,{type:"primary",onClick:t[0]||(t[0]=e=>I(v(c)))},{default:a(()=>[i("Note")]),_:1}),s(r,{type:"success",onClick:t[1]||(t[1]=e=>q(v(c)))},{default:a(()=>[i("Color")]),_:1}),s(r,{type:"warning",onClick:t[2]||(t[2]=e=>$(v(c)))},{default:a(()=>[i("Sleep")]),_:1}),s(r,{type:"danger",onClick:t[3]||(t[3]=e=>F(v(c)))},{default:a(()=>[i("Exit")]),_:1})]),_:1},8,["modelValue"]),s(g,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=e=>f.value=e),title:"选择颜色",width:"30%",onClose:E},{footer:a(()=>[l("span",pe,[s(r,{onClick:P},{default:a(()=>[i("取 消")]),_:1}),s(r,{type:"primary",onClick:B},{default:a(()=>[i("确 定")]),_:1})])]),default:a(()=>[l("div",ie,[s(G,{modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value=e)},{default:a(()=>[(z(),N(oe,null,ae(V,(e,b)=>s(j,{key:b,label:e,style:{display:"block",margin:"10px 0"}},{default:a(()=>[l("span",{style:T({background:e,display:"inline-block",width:"20px",height:"20px",borderRadius:"50%"})},null,4)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),l("div",null,[s(H,{columns:U,"table-data":_.value,options:v(M),onPaginationChange:L},{FirstStart:a(({row:e})=>[l("span",{style:T({color:e.Color})},p(e.FirstStart),5)]),ExternalIP:a(({row:e})=>[l("span",null,p(e.ExternalIP),1)]),Username:a(({row:e})=>[l("span",null,p(e.Username),1)]),Computer:a(({row:e})=>[l("span",null,p(e.Computer),1)]),Address:a(({row:e})=>[l("span",null,p(e.Address),1)]),Arch:a(({row:e})=>[l("span",null,p(e.Arch),1)]),Note:a(({row:e})=>[l("span",null,p(e.Note),1)]),Sleep:a(({row:e})=>[l("span",null,p(e.Sleep),1)]),action:a(({row:e})=>[l("div",null,[s(r,{type:"primary",onClick:b=>R(e),size:"small"},{default:a(()=>[i("查看")]),_:2},1032,["onClick"]),s(r,{type:"success",onClick:b=>O(e),size:"small"},{default:a(()=>[i("更多操作")]),_:2},1032,["onClick"])])]),_:1},8,["table-data","options"])])])])}}});export{Se as default};
