import{a as b,u as x,c as I,_ as S}from"./index-1dd2e770.js";/* empty css                     *//* empty css                 */import{H as E,ay as R,_ as U,r as l,l as T,m as B,p as d,V as a,P as t,u as v,a9 as C,T as L,az as N,aA as P}from"./vue-95bbca75.js";import{a as c,d as F,y as q,x as z,o as A,z as K,P as $,Q as H}from"./element-9ce10ab4.js";import{U as M}from"./index-9a8b9b3e.js";const y=i=>(N("data-v-a3085ca4"),i=i(),P(),i),Q={class:"login-wrap"},j={class:"ms-login"},D=y(()=>d("div",{class:"ms-title"},"Rshell",-1)),G={class:"login-btn"},J=y(()=>d("div",{class:"copyright"},[d("span",null,"github.com/Rubby2001")],-1)),O=E({__name:"LoginView",setup(i){const w=R(),o=U({username:"",password:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},_=b(),n=x(),p=l(),f=m=>{m&&m.validate(s=>{if(s)M.login(o).then(e=>{if(e.data.code==200){c.success("登录成功");const u=_.defaultList[e.data.data.permissions===1?"admin":"user"];e.data.data.permissions,_.handleSet(u),n.setToken(e.data.data.token),n.setPermiss(e.data.data.permissions),n.setRefresh(e.data.data.refresh),e.data.data.permissions===1?n.setRoles("超级管理员"):n.setRoles("普通用户"),n.setUserName(e.data.data.username),w.push("/Clients")}else c.error(e.data.username)});else return c.error("请输入账号或密码"),!1})};return l(!1),l([""]),l(""),l(""),I().clearTags(),(m,s)=>{const e=F,u=q,g=z,h=A,k=K;return T(),B("div",Q,[d("div",j,[D,a(k,{model:o,rules:V,ref_key:"login",ref:p,class:"ms-content"},{default:t(()=>[a(g,{prop:"username"},{default:t(()=>[a(u,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=r=>o.username=r),placeholder:"用户名"},{prepend:t(()=>[a(e,null,{default:t(()=>[a(v($))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(g,{prop:"password"},{default:t(()=>[a(u,{type:"password",placeholder:"密码",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=r=>o.password=r),onKeyup:s[2]||(s[2]=C(r=>f(p.value),["enter"]))},{prepend:t(()=>[a(e,null,{default:t(()=>[a(v(H))]),_:1})]),_:1},8,["modelValue"])]),_:1}),d("div",G,[a(h,{type:"primary",onClick:s[3]||(s[3]=r=>f(p.value))},{default:t(()=>[L("登录")]),_:1})])]),_:1},8,["model"])]),J])}}});const te=S(O,[["__scopeId","data-v-a3085ca4"]]);export{te as default};
