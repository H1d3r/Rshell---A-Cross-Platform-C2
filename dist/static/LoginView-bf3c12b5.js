import{a as k,u as x,c as I,_ as S}from"./index-c2e96937.js";/* empty css                     *//* empty css                 */import{H as E,ay as R,_ as U,r as l,l as N,m as T,p as d,V as t,P as a,u as v,a9 as B,T as C,az as L,aA as F}from"./vue-95bbca75.js";import{a as c,d as P,y as q,x as z,o as A,z as K,M,N as $}from"./element-61b2a7f7.js";import{U as H}from"./index-2a3fac0e.js";const y=i=>(L("data-v-5fc0b45e"),i=i(),F(),i),j={class:"login-wrap"},D={class:"ms-login"},G=y(()=>d("div",{class:"ms-title"},"Rshell",-1)),J={class:"login-btn"},O=y(()=>d("div",{class:"copyright"},[d("span",null,"github.com/Rubby2001")],-1)),Q=E({__name:"LoginView",setup(i){const w=R(),o=U({username:"",password:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},_=k(),n=x(),p=l(),f=m=>{m&&m.validate(s=>{if(s)H.login(o).then(e=>{if(e.data.code==200){c.success("登录成功");const u=_.defaultList[e.data.data.permissions===1?"admin":"user"];e.data.data.permissions,_.handleSet(u),n.setToken(e.data.data.token),n.setPermiss(e.data.data.permissions),n.setRefresh(e.data.data.refresh),e.data.data.permissions===1?n.setRoles("超级管理员"):n.setRoles("普通用户"),n.setUserName(e.data.data.username),w.push("/Clients")}else c.error(e.data.username)});else return c.error("请输入账号或密码"),!1})};return l(!1),l([""]),l(""),l(""),I().clearTags(),(m,s)=>{const e=P,u=q,g=z,h=A,b=K;return N(),T("div",j,[d("div",D,[G,t(b,{model:o,rules:V,ref_key:"login",ref:p,class:"ms-content"},{default:a(()=>[t(g,{prop:"username"},{default:a(()=>[t(u,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=r=>o.username=r),placeholder:"用户名"},{prepend:a(()=>[t(e,null,{default:a(()=>[t(v(M))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"password"},{default:a(()=>[t(u,{type:"password",placeholder:"密码",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=r=>o.password=r),onKeyup:s[2]||(s[2]=B(r=>f(p.value),["enter"]))},{prepend:a(()=>[t(e,null,{default:a(()=>[t(v($))]),_:1})]),_:1},8,["modelValue"])]),_:1}),d("div",J,[t(h,{type:"primary",onClick:s[3]||(s[3]=r=>f(p.value))},{default:a(()=>[C("登录")]),_:1})])]),_:1},8,["model"])]),O])}}});const ae=S(Q,[["__scopeId","data-v-5fc0b45e"]]);export{ae as default};
